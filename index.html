<!doctype html>
<html>
<head>
<title>FShader Bug Viewer</title>
<link rel="stylesheet" type="text/css" href="styles/style.css">

<script type="text/javascript" src="scripts/render.js"></script>
<script type="text/javascript" src="scripts/file_helper.js"></script>
<script type="text/javascript" src="scripts/shader_src.js"></script>
<script type="text/javascript" src="scripts/shader_related.js"></script>
</head>
<body onload="setTimeout(startSafe, 1000)">

  <div class="grid-container">

    <div class="left">

      <div class="image-row">
        <div class="image-column" onclick="loadFileAsText()">
          <div class="polaroid">
            <canvas id="opengl-canvas" style="border: none;" width="256" height="256"></canvas>
            <div class="container">
              <p>Actual rendered image</p>
              <div>Click to load shader from local disk</div>
            </div>
          </div>
        </div>

        <div class="image-column" onclick="loadExpectedImage()">
          <div class="polaroid">
            <img src="blank.png" id="expected-image" style="width:256;height:256">
            <div class="container">
              <p>Expected rendered image</p>
              <div>Click to load image from local disk</div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <textarea id="shader_source" placeholder="Source of fragment shader"></textarea>
      </div>

      <div class="row">
        <div>
          <label>Select to view the 6 bugs that FShader discovered: (START HERE!): </label>
          <select id="select-bugs" onchange="loadAndRender()">
            <option value="default">-------</option>
            <option value="bug1">Bug1</option>
            <option value="bug2">Bug2</option>
            <option value="bug3">Bug3</option>
            <option value="bug4">Bug4</option>
            <option value="bug5">Bug5</option>
            <option value="bug6">Bug6</option>
          </select>
        </div>
      </div>

      <!-- <div class="row">
        <div class="cell">
            <button id="save-button" title="Save HLSL shader" onclick="saveTextAsFile()">Save the translated HLSL shader</button>
        </div>   
      </div> -->

      <div class="row button-row">
        <div>
            <button title="Load shader from local disk" onclick="loadFileAsText()">Load shader from local disk</button>
        </div>
        <div>
          <button id="start" title="Start rendering fragment shader" onclick="startSafe()">Start
              rendering
          </button>
        </div>
        <div>
            <button id="stop" title="Stop rendering" onclick="stop()">Stop rendering</button>
        </div>
      </div>

      <div class="row">
        <textarea id="console" placeholder="Shader compilation output" readonly></textarea>
      </div>
          
    </div>

  <div class="right">
    <h1 id="instructions-for-reproducing-bugs">Instructions for reproducing bugs</h1>
    <ol>
    <li>Go to the dropdown list marked with &quot;START HERE!&quot;</li>
    <li>Select one of the six bugs from the dropdown list</li>
    </ol>
    <p>The shader source code of the corresponding bug will then be loaded
    into the textarea marked with placeholder &quot;Source of fragment shader.&quot;</p>
    <p>The browser on your local machine will compile and execute the shader and display the rendering
    output image on the left. The expected image of the corresponding bug is
    displayed on the right.</p>
    <p>If you have one of our tested GPUs: Intel 12400, AMD Radeon 6400,
    or NVIDIA RTX 3600, and the webpage is opened in Chrome on a Windows
    system, you would see that the rendered image is different from the expected image.</p>
  </div>

  </div>

</body>
</html>
